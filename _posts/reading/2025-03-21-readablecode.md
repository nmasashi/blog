---
layout: post
title: "リーダブルコード"
date: 2025-03-20
categories: reading
---

## 1 章 理解しやすいコード

1.1

三項演算子か if else だと if else の方が見やすい気がするけど、三項演算子を使ってしまう。。。

1.2

**_コードは他の人が最短時間で理解できるように書かなければならない_**

ここで言う「理解する」とは変更を加えたりバグを見つけれるかという意味。

1.3

コードは短い方がいいことも多いが、理解するまでの時間を短くする方が優先される。
例えば、一行に"()"の入れ子が多いプログラムは理解が遅くなる。

```c
//短いけど読みにくい
assert((!(bucket = FindBucket(key))) || !bucket->IsOccupied());

//こっちのが長いけど読みやすい
bucket = FindBucket(key);
if(bucket != NULL) assert(!bucket -> IsOccupied());
```

## 2 章 名前に情報を詰め込む

- 明確な単語を選ぶ
- 汎用的な名前を避ける
- 抽象的な名前よりも具体的な名前を使用する
- 接尾語や接頭語を使用して情報を追加する
- 名前の長さを決める
- 名前のフォーマットで情報を伝える

  2.1

明確な単語を使用する

```C
//停止後に再開可能かわからない
void stop(){...}

//再開できないのがわかる
void kill(){...}

//再開できるのがわかる
void pause(){...}
```

2.2

汎用的な変数名(tmp など)は避ける。ただし、tmp に限って言えば一時的な情報の保管が目的である場合は使用しても OK

```js
// このtmpの使い方はOK
if(right < left>){
  tmp = right;
  right = left;
  left = tmp;
}
```

イテレータとして i, j などが使用される場合も OK。ただ user_i, club_j といったように情報を足すことで理解がしやすくなることもある。

2.4

変数名に情報を付与してわかりやすくする

```js
// 単位がわからない
var start;

// 単位がミリ秒だとわかる
var start_ms;
```

2.5

変数名はスコープが小さければ短い名前でも問題はない。
単語を省略する場合は一般的に省略されている単語(`string`→`str`)などは OK。
プロジェクト個有名詞は省略しない方がいよい。

2.6

名前のフォーマットで役割がわかるようにする。

- キャメルケースは変数名(例：lower_separated)
- 全部大文字は定数（例：MAX_COUNT）

## 3 章 誤解されない名前

```js
// resultに0未満の数が入るのか、そうではない数がはいるのかいまいちわからない
result = numbers.filter(num < 0);

// こっちの方がわかりやすい
result = numbers.select(num < 0);
```

限界値を定数化したい場合は`min`または`max`を使用する

範囲を指定するときは`first`, `end`または`begin`,`end`を使用する

bool 値が格納される変数には頭に`is/has/can/should`などを付ける

`get(), size()`といったメソッドは軽量であることが期待される

## 4 章 美しさ

プログラミングの大半はコードを読む時間であるためコードを読みやすくすることは大切。
この章でいう読みやすいとは同じソースコードでも改行の位置などを工夫することで可読性をあげることを指している。

4.4

縦の並びをそろえることで読みやすくすることが書かれている。

```js
var detail = request.POST.get("details");
var location = request.POST.get("location");
var phone = request.POST.get("phone");
```

書かれている意味はわかるが、オートフォーマットでこのようなことができるか疑問。そこまでしなくてもいい気もする。

```js
var detail = request.POST.get("details");
var location = request.POST.get("location");
var phone = request.POST.get("phone");
```

そこまでかわらないかな～

4.7

コードは段落で分割してブロックごとに見やすくする

4.8

一貫性がなによりも大事（正しいスタイルよりも）。

## 5 章 コメントすべきことを知る

ソースコードからすぐにわかる内容はコメントする必要はない。関数の説明にコメントを付ける場合、関数名自体が適切な名前になっているか確認する。基本的には、コードだけで簡潔できる方がいい。

コードに現れない開発者の考えの記録にコメントを使用するのはいい。なぜこのような実装になっているのかの記録は、後に見る人の役に立つ。

コメントを使用するよい例

- 定数の値がなぜその値になっているのかを示す
- 関数を使用する上での考慮点をコメントで使用者に知らせる
- ある程度のコードのまとまりの全体像がわかるコメント

## 6 章 コメントは正確で簡潔に

コメント文は簡潔にし、代名詞は避ける。
実例をコメントに書く方法もあるが、適切な例である必要がある。

## 7 章 制御フローを読みやすくする

7.1

不等式を書く際は`変化する値 (不等式) 変化しない値`の順に核と見やすい

```java
// 少し読みにくい
while(MAX_AGE > age)

// こっちの方が読みやすい
while(age < MAX_AGE)
```

7.2

並び順を決めれる考え方

- 条件式は肯定文を使用する
- 単純な条件を先に書く
- 関心を引く条件や目立つ条件を先にかく

考え方のうち、どれを優先させるかはその時々の状況次第。

7.3

三項演算子は読みやすくなるときだけに使用する。

## 8 章巨大な式を分割する

8.1

説明変数を使用する例

```js
// なにとrootを比較しているのか直ぐにはわからない
if line.split(':').strip() == "root":


// usernameとrootを比較する処理なのが直ぐにわかる
username = line.split(':').strip()
if username == "root":
```

8.2

要約変数を使用する例

```js
// request.user.id == document.owner_idがどのような比較なのか読み解く必要がある
if (request.user.id == document.owner_id) {
}
if (request.user.id != document.owner_id) {
}

// 比較の意味がわかりやすくなり、読み手がこの後の処理を予測しやすい
user_owns_document = request.user.id == document.owner_id;
if (user_owns_document) {
}
if (!user_owns_document) {
}
```

8.3

複雑なロジックを簡潔にしすぎて可読性が落ちる場合がある。分けた方がわかりやすい場合はそのようにする。

## 9 章 変数と読みやすさ
